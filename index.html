<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/><title>유아른 계산기</title><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css"><style>:root{--bg:#f7f8fb;--card:#fff;--line:#e6e8f0;--fg:#0e1116;--muted:#6b7280;--accent:#2563eb;--ink:#fff;--r-xl:14px;--r-md:12px;--shadow:0 8px 24px rgba(15,23,42,.06);}*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font:14.5px/1.55 Pretendard,system-ui,-apple-system,Segoe UI,Roboto,"Apple SD Gothic Neo","Malgun Gothic",sans-serif}.page{max-width:2360px;margin:8px auto;padding:0 14px;display:grid;grid-template-columns:3fr 2fr;column-gap:20px;row-gap:0;min-height:calc(100dvh - 16px)}.cat{margin-top:0}.cat h3{margin:2px 2px 6px;font-size:14px;font-weight:700;color:#111827}.grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}@media(max-width:1800px){.grid{grid-template-columns:repeat(4,1fr)}}@media(max-width:1180px){.grid{grid-template-columns:repeat(3,1fr)}}@media(max-width:880px){.grid{grid-template-columns:repeat(2,1fr)}}.product{background:var(--card);border:1px solid var(--line);border-radius:var(--r-md);padding:10px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px;cursor:pointer;transition:.2s}.product.selected{border:2px solid var(--accent);box-shadow:0 0 0 3px rgba(37,99,235,.2)}.topRow{display:flex;align-items:center;gap:10px}.p-thumb{width:50px;height:50px;border-radius:8px;object-fit:cover;background:#eef2f7}.p-info{flex:1;display:flex;flex-direction:column;gap:2px}.p-name{font-size:13px;font-weight:700;line-height:1.35;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.p-price{font-size:12.5px;color:var(--accent)}.qtyRow{display:flex;justify-content:center;align-items:center;gap:6px}.btn{border:1px solid var(--line);background:#f3f5fa;border-radius:8px;width:28px;height:28px;cursor:pointer;font-weight:800;font-size:16px;display:flex;align-items:center;justify-content:center}.badge{min-width:34px;text-align:center;font-weight:800}.panel{background:var(--card);border:1px solid var(--line);border-radius:var(--r-xl);padding:12px;position:sticky;top:0;align-self:start;box-shadow:var(--shadow);max-height:calc(100dvh - 20px);overflow:auto;min-width:560px}.panel h3{margin:0 0 8px;font-size:15px;font-weight:800}.empty{padding:14px;border:1px dashed var(--line);border-radius:12px;text-align:center;color:#6b7280;background:#fafbff}table{width:100%;border-collapse:separate;border-spacing:0;margin-top:6px;border-radius:12px;border:1px solid var(--line);table-layout:fixed}thead th{background:#f6f7fb;font-weight:700;font-size:12.5px;padding:8px;border-bottom:1px solid var(--line);position:sticky;top:0}tbody td{padding:8px;border-bottom:1px solid var(--line);font-size:13.5px}tbody tr:nth-child(even){background:#fafbff}.qtyCtl{display:inline-flex;align-items:center;gap:6px}.btn-sm{width:24px;height:24px;border:1px solid var(--line);background:#f3f5fa;border-radius:6px;cursor:pointer;font-weight:800;display:flex;align-items:center;justify-content:center}.totals{margin-top:10px;display:flex;flex-direction:column;gap:6px}.totalLine{display:flex;justify-content:space-between;align-items:center}.gift{font-weight:800}.actions{margin-top:10px;display:flex;gap:8px}.pay{flex:1;background:var(--accent);border:1px solid var(--accent);color:var(--ink);border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer;font-size:15px}.note{font-size:12px;color:#6b7280;margin-top:6px}</style></head><body><div class="page"><main><div id="cats"></div></main><aside class="panel"><h3>선택한 제품</h3><div id="cartEmpty" class="empty">아직 선택된 제품이 없습니다.</div><div id="cartWrap" style="display:none"><table><thead><tr><th style="width:40%">상품명</th><th style="width:16%">수량</th><th style="width:17%">단가</th><th style="width:17%">금액</th></tr></thead><tbody id="cartBody"></tbody></table><div class="totals"><div class="totalLine"><span>총합</span><strong id="grand">0원</strong></div><div class="totalLine"><span>총 수량</span><strong id="totalQty">0개</strong></div><div class="totalLine gift"><span>사은품</span><span id="gift">없음</span></div></div><div class="actions"><button id="pay" class="pay">결제</button></div></div><div class="note">전송 후 모든 항목이 초기화됩니다.</div></aside></div><form id="orderForm" method="POST" action="https://docs.google.com/forms/d/e/FORM_ID/formResponse" target="hiddenFrame" style="display:none"></form><iframe name="hiddenFrame" style="display:none"></iframe><script>const IMG_BASE="images";const catsEl=document.getElementById("cats"),cartEmptyEl=document.getElementById("cartEmpty"),cartWrapEl=document.getElementById("cartWrap"),cartBodyEl=document.getElementById("cartBody"),grandEl=document.getElementById("grand"),giftEl=document.getElementById("gift"),payBtn=document.getElementById("pay"),formEl=document.getElementById("orderForm"),cart={},productMap={};function giftBy(t){return t>=1e5?"마스크팩 + 립밤 중 택1 + 리사이클파우치":t>=5e4?"마스크팩 + 립밤 중 택1":t>=3e4?"마스크팩":"없음"}function render(){Object.keys(productMap).forEach(t=>{document.getElementById(`badge-${t}`).textContent=String(cart[t]||0);const e=document.getElementById(`card-${t}`);cart[t]>0?e.classList.add("selected"):e.classList.remove("selected")});const t=Object.keys(cart);if(!t.length)return cartEmptyEl.style.display="",cartWrapEl.style.display="none",grandEl.textContent="0원",giftEl.textContent="없음",document.getElementById("totalQty").textContent="0개";cartEmptyEl.style.display="none",cartWrapEl.style.display="";let e=0,a=0;cartBodyEl.innerHTML=t.map(t=>{const r=productMap[t],n=cart[t],c=n*r.price;return e+=c,a+=n,`<tr data-key="${t}"><td class="nameCell" title="${r.name}">${r.name}</td><td><div class="qtyCtl"><button class="btn-sm" data-act="minus">−</button><span>${n}</span><button class="btn-sm" data-act="plus">＋</button></div></td><td>${r.price.toLocaleString()}원</td><td>${c.toLocaleString()}원</td></tr>`}).join(""),grandEl.textContent=`${e.toLocaleString()}원`,giftEl.textContent=giftBy(e),document.getElementById("totalQty").textContent=`${a}개`}cartBodyEl.addEventListener("click",t=>{const e=t.target.closest("button");if(!e)return;const a=t.target.closest("tr")?.dataset?.key;if(!a)return;"plus"===e.dataset.act?cart[a]=(cart[a]||0)+1:"minus"===e.dataset.act&&((cart[a]||0)>0&&cart[a]--,0===cart[a]&&delete cart[a]),render()});payBtn.addEventListener("click",()=>{const t=Object.keys(cart);if(!t.length)return alert("상품을 선택하세요.");formEl.innerHTML="",t.forEach(t=>{const e=productMap[t],a=cart[t];formEl.innerHTML+=`<input type="hidden" name="entry.ITEM_NAME" value="${e.name}"><input type="hidden" name="entry.ITEM_QTY" value="${a}"><input type="hidden" name="entry.ITEM_PRICE" value="${e.price}">`}),formEl.innerHTML+=`<input type="hidden" name="entry.TOTAL" value="${grandEl.textContent.replace(/[^0-9]/g,"")}"><input type="hidden" name="entry.GIFT" value="${giftEl.textContent}"><input type="hidden" name="entry.TIMESTAMP" value="${(new Date).toISOString()}">`,formEl.submit();for(const e of t)delete cart[e];render(),window.scrollTo({top:0,behavior:"smooth"}),alert("제출되었습니다.")});async function loadProducts(){const t=await fetch("https://opensheet.elk.sh/1QpbkNSpsAoKhgMbCtHUhz97D5epuUqoGt7esf1-u-fw/sheet1"),e=await t.json(),a={};e.forEach(t=>{const e=t["카테고리"]||"기타";a[e]||(a[e]=[]),a[e].push({name:t["상품명"],price:Number(t["판매가"].replace(/,/g,"")),img:t["이미지"]})}),Object.entries(a).forEach(([t,e],a)=>{const r=document.createElement("section");r.className="cat",r.innerHTML=`<h3>${t}</h3><div class="grid"></div>`;const n=r.querySelector(".grid");e.forEach((t,e)=>{const r=`${a}-${e}`;productMap[r]=t;const c=t.img.startsWith("http")?t.img:`${IMG_BASE}/${t.img}`,o=document.createElement("div");o.className="product",o.id=`card-${r}`,o.innerHTML=`<div class="topRow"><img class="p-thumb" alt="${t.name}" src="${c}"><div class="p-info"><div class="p-name">${t.name}</div><div class="p-price">${t.price.toLocaleString()}원</div></div></div><div class="qtyRow"><button class="btn" data-act="minus">−</button><div class="badge" id="badge-${r}">0</div><button class="btn" data-act="plus">＋</button></div>`,o.addEventListener("click",e=>{const a=e.target?.dataset?.act;"minus"===a?((cart[r]||0)>0&&cart[r]--,0===cart[r]&&delete cart[r]):cart[r]=(cart[r]||0)+1,render()}),n.appendChild(o)}),catsEl.appendChild(r)}),render()}window.addEventListener("DOMContentLoaded",loadProducts);</script></body></html>
